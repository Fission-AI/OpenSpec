# CLI 差异命令 - 变更

## 已移除的要求

### 要求：显示格式

差异命令应以文本格式显示统一差异输出。

**移除原因**：标准统一差异格式被要求级别的并排比较所取代，后者更好地显示语义变更而不是逐行文本差异。

#### 场景：统一差异输出（已弃用）

- **当** 运行 `openspec diff <change>` 时
- **则** 显示文件的统一文本差异
- **并且** 包含表示添加和删除的 `+`/`-` 前缀行

## 修改后的要求

### 要求：差异输出

命令应显示要求级别的比较，仅显示变更的要求。

#### 场景：变更的并排比较

- **当** 运行 `openspec diff <change>` 时
- **则** 仅显示已变更的要求
- **并且** 以并排格式显示，该格式：
  - 在左侧清楚地显示当前版本
  - 在右侧显示未来版本
  - 指示新要求（当前中不存在）
  - 指示删除的要求（未来中不存在）
  - 对齐修改的要求以便轻松比较

## 新增要求

### 要求：验证

命令应验证变更是否可以成功应用。

#### 场景：无效的增量引用

- **当** 增量引用不存在的要求时
- **则** 显示带有特定要求的错误消息
- **并且** 继续显示其他有效变更
- **并且** 在输出中清楚地标记失败的变更