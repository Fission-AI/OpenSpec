## 修改后的要求
### 要求：AI 工具配置

命令应根据用户选择配置 AI 编码助手与 OpenSpec 指令。

#### 场景：提示选择 AI 工具

- **当** 交互式运行时
- **则** 使用多选菜单提示用户"您使用哪些 AI 工具？"
- **并且** 列出每个可用工具并带有复选框：
  - Claude Code（创建或刷新 CLAUDE.md 和斜杠命令）
  - Cursor（创建或刷新 `.cursor/commands/*` 斜杠命令）
  - AGENTS.md 标准（创建或刷新带有 OpenSpec 标记的 AGENTS.md）
- **并且** 在已存在受管文件的工具旁边显示"(已配置)"，以便用户理解选择将刷新内容
- **并且** 将禁用的工具视为"即将推出"并保持其不可选择
- **并且** 允许在选择一个或多个工具后按回车键确认

### 要求：AI 工具配置详情

命令应使用标记系统正确配置选定的 AI 工具与 OpenSpec 特定指令。

#### 场景：配置 Claude Code

- **当** 选择 Claude Code 时
- **则** 在项目根目录（不在 openspec/ 内）创建或更新 `CLAUDE.md`

#### 场景：创建新的 CLAUDE.md

- **当** CLAUDE.md 不存在时
- **则** 创建包含用标记包装的 OpenSpec 内容的新文件：
```markdown
<!-- OPENSPEC:START -->
# OpenSpec 指令

使用 OpenSpec 进行规范驱动开发的 AI 编码助手指令。

## TL;DR 快速清单
- 搜索现有工作：`openspec spec list --long`、`openspec list`
- 确定范围：新功能 vs 修改现有功能
- 选择唯一的 `change-id`：动词引导的 kebab-case（`add-`、`update-`、`remove-`、`refactor-`）
- 脚手架：`proposal.md`、`tasks.md`、可选 `design.md` 和规范增量
- 使用 `openspec validate [change-id] --strict` 验证
- 实施前请求批准
<!-- OPENSPEC:END -->
```

#### 场景：更新现有的 CLAUDE.md

- **当** CLAUDE.md 已存在时
- **则** 保留所有现有内容
- **并且** 使用标记在文件开头插入 OpenSpec 内容
- **并且** 确保标记在已存在时不重复

#### 场景：使用标记管理内容

- **当** 使用标记系统时
- **则** 使用 `<!-- OPENSPEC:START -->` 标记受管内容的开始
- **并且** 使用 `<!-- OPENSPEC:END -->` 标记受管内容的结束
- **并且** 允许 OpenSpec 更新其内容而不影响用户自定义
- **并且** 完整保留标记外的所有内容

### 要求：交互模式

命令应提供一个用于 AI 工具选择的交互菜单，并附带清晰的导航说明。

#### 场景：显示交互菜单

- **当** 运行时
- **则** 提示用户："您使用哪些 AI 工具？"
- **并且** 显示带有可用工具（Claude Code、Cursor、AGENTS.md 标准）的基于复选框的多选菜单
- **并且** 将禁用选项显示为"即将推出"（不可选择）
- **并且** 显示内联帮助，指示空格键切换选择，回车键确认

#### 场景：导航菜单

- **当** 用户在菜单中时
- **则** 允许箭头键在选项间移动
- **并且** 允许空格键切换高亮选项
- **并且** 允许回车键确认所有当前选择

### 要求：成功输出

命令应在成功初始化后提供清晰、可操作的后续步骤。

#### 场景：显示成功消息

- **当** 初始化成功完成时
- **则** 显示成功横幅，后跟针对选定工具的可操作提示
- **并且** 总结哪些助手文件被创建 versus 刷新（例如，`CLAUDE.md (已创建)`、`.cursor/commands/openspec-apply.md (已刷新)`）
- **并且** 包含可复制粘贴的入门提示，为每个配置的助手替换占位符文本（[YOUR FEATURE HERE]）为真实指导以进行自定义
- **并且** 当没有特定工具文件存在时引用 AGENTS.md 兼容助手（例如，当仅选择 AGENTS.md 标准时）