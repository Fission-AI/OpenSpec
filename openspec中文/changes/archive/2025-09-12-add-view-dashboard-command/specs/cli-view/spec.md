# CLI 查看命令 - 变更

## 新增要求

### 要求：仪表板显示

系统应提供一个 `view` 命令，显示规范和变更的仪表板概览。

#### 场景：基本仪表板显示

- **当** 用户运行 `openspec view` 时
- **则** 系统显示一个格式化的仪表板，包含规范、活动变更、已完成变更和规范的章节

#### 场景：无 OpenSpec 目录

- **当** 用户在没有 OpenSpec 的目录中运行 `openspec view` 时
- **则** 系统显示错误消息 "✗ 未找到 openspec 目录"

### 要求：摘要部分

仪表板应显示包含关键项目指标的摘要部分。

#### 场景：完整摘要显示

- **当** 渲染带有规范和变更的仪表板时
- **则** 系统显示规范和要求的总数
- **并且** 显示进行中的活动变更数量
- **并且** 显示已完成的变更数量
- **并且** 显示整体任务进度百分比

#### 场景：空项目摘要

- **当** 不存在规范或变更时
- **则** 摘要显示所有指标的零计数

### 要求：活动变更显示

仪表板应显示带有视觉进度指示器的活动变更。

#### 场景：带进度条的活动变更

- **当** 存在带有任务的进行中变更时
- **则** 系统显示每个变更，变更名称左对齐
- **并且** 使用 Unicode 字符的视觉进度条
- **并且** 右侧显示完成百分比

#### 场景：无活动变更

- **当** 所有变更都已完成或不存在变更时
- **则** 从显示中省略活动变更部分

### 要求：已完成变更显示

仪表板应在单独的部分中列出已完成的变更。

#### 场景：已完成变更列表

- **当** 存在已完成的变更（所有任务完成）时
- **则** 系统在专用部分中显示它们并带有勾选指示器

#### 场景：混合完成状态

- **当** 一些变更是完成的而其他是活动的时
- **则** 系统将它们分离到适当的章节中

### 要求：规范显示

仪表板应显示按要求计数排序的规范。

#### 场景：带计数的规范列表

- **当** 项目中存在规范时
- **则** 系统显示按要求计数（降序）排序的规范，并带有计数标签

#### 场景：带解析错误的规范

- **当** 无法解析规范文件时
- **则** 系统包含它并带有 0 要求计数

### 要求：视觉格式化

仪表板应使用一致的视觉格式化，带有颜色和符号。

#### 场景：颜色编码

- **当** 显示仪表板元素时
- **则** 系统对规范项目使用青色
- **并且** 对活动变更使用黄色
- **并且** 对已完成项目使用绿色
- **并且** 对补充文本使用暗灰色

#### 场景：进度条渲染

- **当** 显示进度条时
- **则** 系统对完成部分使用填充块（█），对剩余部分使用浅色块（░）

### 要求：错误处理

查看命令应优雅地处理错误。

#### 场景：文件系统错误

- **当** 文件系统操作失败时
- **则** 系统继续使用可用数据并省略不可访问的项目

#### 场景：无效数据结构

- **当** 规范或变更具有无效格式时
- **则** 系统跳过无效项目并继续渲染