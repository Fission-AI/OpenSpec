# 增量：CLI 列表命令

## 修改后的要求

### 要求：命令执行
命令应根据选择的模式扫描和分析活动变更或规范。

#### 场景：扫描变更（默认）
- **当** 执行 `openspec list` 无标志时
- **则** 扫描 `openspec/changes/` 目录以查找变更目录
- **并且** 从结果中排除 `archive/` 子目录
- **并且** 解析每个变更的 `tasks.md` 文件以计算任务完成情况

#### 场景：扫描规范
- **当** 执行 `openspec list --specs` 时
- **则** 扫描 `openspec/specs/` 目录以查找功能
- **并且** 读取每个功能的 `spec.md`
- **并且** 解析要求以计算要求计数

### 要求：输出格式
命令应以清晰、可读的表格格式显示项目，具有适合模式的进度或计数。

#### 场景：显示变更列表（默认）
- **当** 显示变更列表时
- **则** 显示带有列的表格：
  - 变更名称（目录名称）
  - 任务进度（例如，"3/5 任务" 或 "✓ 完成"）

#### 场景：显示规范列表
- **当** 显示规范列表时
- **则** 显示带有列的表格：
  - 规范 ID（目录名称）
  - 要求计数（例如，"要求 12"）

### 要求：空状态
命令应在所选模式无项目时提供清晰反馈。

#### 场景：处理空状态（变更）
- **当** 无活动变更存在时（仅 archive/ 或空 changes/）
- **则** 显示："未找到活动变更。"

#### 场景：处理空状态（规范）
- **当** 无规范目录存在或包含无功能时
- **则** 显示："未找到规范。"

### 要求：标志
命令应接受标志以选择正在列出的名词。

#### 场景：选择规范
- **当** 提供 `--specs` 时
- **则** 列出规范而不是变更

#### 场景：选择变更
- **当** 提供 `--changes` 时
- **则** 显式列出变更（与默认行为相同）