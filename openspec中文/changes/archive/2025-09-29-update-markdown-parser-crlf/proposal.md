# 更新 Markdown 解析器 CRLF 处理

## 问题
Windows 用户报告 `openspec validate` 即使在部分存在时也会引发"变更必须有 Why 部分"（见 GitHub 问题 #77）。CLI 目前在 `\n` 上分割 markdown 并在不剥离 `\r` 的情况下比较标题，因此以 CRLF 行尾保存的文件在标题标记中保留尾随回车。结果解析器无法检测到 `## Why`/`## What Changes`，触发错误验证错误并破坏 Windows 默认编辑器上的工作流。

## 解决方案
- 在解析器内规范化 markdown 内容，使 CRLF 和单独 CR 输入在部分检测前被视为 `\n`，从标题和内容比较中修剪任何回车。
- 在构建 `MarkdownParser` 的任何地方重用规范化读取器，以保持验证、查看、规范和列表流的行为一致。
- 添加重现失败的回归覆盖（围绕 `parseChange` 的单元测试和写入 CRLF 变更然后运行 `openspec validate` 的 CLI 启动/端到端测试）。
- 更新 `cli-validate` 规范以编纂无论行尾样式如何都能识别必需部分的期望。

## 好处
- 为 Windows 编辑器恢复正确的验证行为，无需手动行尾转换。
- 通过有针对性的测试锁定修复，使未来解析器重构保持跨平台支持。
- 澄清规范，使下游工作（例如，跨 shell 端到端计划）了解不可协商的行为。

## 风险
- 低：解析器规范化触及解析规范和变更的共享代码路径；需要确保其他命令使用者没有回归（通过现有解析器测试加上新的 CRLF 夹具缓解）。