## 修改后的要求
### 要求：更新行为
更新命令应以团队友好的方式将 OpenSpec 指令文件更新为最新模板。

#### 场景：运行更新命令

- **当** 用户运行 `openspec update` 时
- **则** 命令应：
  - 检查 `openspec` 目录是否存在
  - 用最新模板替换 `openspec/AGENTS.md`（完全替换）
  - 使用受管标记块创建或刷新根级 `AGENTS.md` 文件（如果缺失则创建）
  - 仅更新**现有** AI 工具配置文件（例如，CLAUDE.md）
    - 检查每个注册的 AI 工具配置器
    - 对于每个配置器，检查其文件是否存在
    - 仅使用标记更新已存在的文件
    - 保留标记外的用户内容
  - 显示列出更新文件的成功消息

### 要求：工具无关更新
更新命令应以可预测和安全的方式处理文件更新，同时尊重团队工具选择。

#### 场景：更新文件

- **当** 更新文件时
- **则** 用最新模板完全替换 `openspec/AGENTS.md`
- **并且** 使用 OpenSpec 标记创建或更新根级 `AGENTS.md`
- **并且** 仅使用标记更新**现有** AI 工具文件中的 OpenSpec 受管块
- **并且** 使用默认目录名 `openspec`
- **并且** 幂等（重复运行无额外效果）
- **并且** 通过不创建超出根 `AGENTS.md` 的额外工具文件来尊重团队成员的 AI 工具选择

### 要求：核心文件始终更新
更新命令应始终更新核心 OpenSpec 文件并显示 ASCII 安全的成功消息。

#### 场景：成功更新

- **当** 更新成功完成时
- **则** 用最新模板替换 `openspec/AGENTS.md`
- **并且** 通过标记块确保根级 `AGENTS.md` 与最新模板匹配
- **并且** 在标记内更新现有 AI 工具配置文件
- **并且** 显示消息："更新了 OpenSpec 指令"