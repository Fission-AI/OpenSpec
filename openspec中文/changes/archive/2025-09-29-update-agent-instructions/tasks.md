# 实现任务

## 1. 重构 OpenSpec README.md
- [x] 1.1 将三阶段工作流作为主要内容前置
- [x] 1.2 用层次结构重构：核心工作流 → 快速开始 → 命令 → 详情 → 边缘情况
- [x] 1.3 将总长度减少 50%（目标：约 285 行，从当前约 575 行）
- [x] 1.4 添加"任何任务之前"的上下文收集清单
- [x] 1.5 添加"创建规范之前"的规则，先检查现有规范

## 2. 添加决策清晰度  
- [x] 2.1 为"创建提案？"场景创建清晰的决策树
- [x] 2.2 删除混淆代理的模糊条件
- [x] 2.3 为每个决策分支添加具体示例
- [x] 2.4 简化错误与功能确定逻辑
- [x] 2.5 添加明确的第二阶段实现步骤（阅读 → 实现 → 标记完成）

## 3. 更新 CLI 文档
- [x] 3.1 记录 `openspec list` 和 `openspec list --specs` 命令
- [x] 3.2 记录带所有标志和交互模式的 `openspec show`
- [x] 3.3 记录 `openspec diff [change]` 用于查看规范差异
- [x] 3.4 记录带 --skip-specs 选项的 `openspec archive`
- [x] 3.5 记录带 --strict 和批处理模式的 `openspec validate`
- [x] 3.6 记录 `openspec init` 和 `openspec update` 命令
- [x] 3.7 删除所有已弃用的名词优先命令引用
- [x] 3.8 为每个命令变体添加具体使用示例
- [x] 3.9 记录所有标志：--json、--type、--no-interactive 等
- [x] 3.10 记录调试命令：`show --json --deltas-only`

## 4. 添加规范文件文档
- [x] 4.1 添加带 ADDED/MODIFIED 部分的完整规范文件结构示例
- [x] 4.2 记录场景格式化要求（#### Scenario: 标题）
- [x] 4.3 解释增量文件位置（changes/{name}/specs/ 目录）
- [x] 4.4 显示增量如何自动提取
- [x] 4.5 包含关于最常见错误的警告（场景格式化）

## 5. 添加故障排除部分
- [x] 5.1 记录常见错误及其解决方案
- [x] 5.2 添加增量检测调试步骤
- [x] 5.3 包含验证最佳实践（--strict 标志）
- [x] 5.4 显示如何使用 JSON 输出进行调试
- [x] 5.5 添加静默解析失败示例

## 6. 添加代理特定部分
- [x] 6.1 添加实现工作流（阅读文档 → 实现任务 → 标记完成）
- [x] 6.2 添加规范发现工作流（创建前检查现有规范）
- [x] 6.3 创建工具选择矩阵（Grep vs Glob vs Read）
- [x] 6.4 添加错误恢复模式部分
- [x] 6.5 添加上下文管理指南
- [x] 6.6 添加验证工作流部分
- [x] 6.7 添加最佳实践部分（简洁、具体、简单）

## 7. 更新 CLAUDE.md 模板
- [x] 7.1 用简化内容更新 `src/core/templates/claude-template.ts`
- [x] 7.2 突出显示三阶段工作流
- [x] 7.3 添加全面的 CLI 快速参考（list、show、diff、archive 等）
- [x] 7.4 添加"任何任务之前"清单
- [x] 7.5 添加"创建规范之前"规则
- [x] 7.6 保持复杂性管理原则
- [x] 7.7 添加关键场景格式化注释（#### Scenario: 标题）
- [x] 7.8 包含调试命令参考

## 8. 测试和验证
- [x] 8.1 测试所有记录的 CLI 命令的准确性
- [x] 8.2 运行 `openspec init` 验证 CLAUDE.md 生成
- [x] 8.3 用示例场景验证指令清晰度
- [x] 8.4 确保在简化过程中没有丢失关键信息
- [x] 8.5 验证决策树消除歧义
- [x] 8.6 测试场景格式化示例正确工作
- [x] 8.7 验证故障排除步骤解决常见错误